<?php if (APPLICATION_ENV == 'development'): ?>
<?php if (isset($this->exception)): ?>
  <!DOCTYPE html>
<html>
<head>
  <title>The page you were looking for doesn't exist </title>
</head>
<body>
 <h1>An error occurred</h1>
	<h2><?php echo $this->message ?></h2>
  <h3>Exception information:</h3>
	<p>
		<b>Message:</b> <?php echo $this->exception->getMessage()?>
  </p>

	<h3>Stack trace:</h3>
	<pre><?php echo $this->exception->getTraceAsString()?>
  	</pre>

	<h3>Request Parameters:</h3>
	<pre><?php echo $this->escape(var_export($this->request->getParams(), true))?>
  </pre>
</body>
</html>
  <?php endif ?>

<?php else: ?>
<!DOCTYPE html>
<html>
<head>
  <title>The page you were looking for doesn't exist </title>
  <script src="<?php echo $this->baseUrl('public/js/three.js') ?>" type="text/javascript"></script>
  <style type="text/css">
	body{background-color:#fff;color:#666;text-align:center;font-family:arial, sans-serif;height:100%;background: #fff;background: -moz-linear-gradient(white, #ccc);background: -webkit-gradient(linear, 0% 100%, 0% 0%, from(#CCC), to(white));background: -webkit-linear-gradient(white, ccc);overflow:hidden}.wrapper{position:absolute;top:50%;margin-top:-85px;left:50%;margin-left:-160px;width:320px;line-height:35px;-webkit-box-shadow:0 0 10px rgba(0,0,0,0.6), inset 1px 0 0 rgba(255,255,255,0.1), inset -1px 0 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(255,255,255,0.1);-moz-box-shadow:0 0 10px rgba(0,0,0,0.6), inset 1px 0 0 rgba(255,255,255,0.1), inset -1px 0 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(255,255,255,0.1);box-shadow:0 0 10px rgba(0,0,0,0.6), inset 1px 0 0 rgba(255,255,255,0.1), inset -1px 0 0 rgba(255,255,255,0.1), inset 0 -1px 0 rgba(255,255,255,0.1);-webkit-border-radius:5px;-moz-border-radius:5px;-ms-border-radius:5px;-o-border-radius:5px;border-radius:5px;border:1px solid #1D1E21;background:#3B3B42;color:#fff;text-shadow:0 1px #000}a{text-decoration:none;outline:none;color:#FFF}
  </style>
</head>

<body>
<script>
var container,stats,camera,scene,renderer,group,particle,mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;init();animate();
function init(){container=document.createElement("div");document.body.appendChild(container);camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3E3);camera.position.z=1E3;scene=new THREE.Scene;var a=2*Math.PI,d=function(b){b.beginPath();b.arc(0,0,1,0,a,!0);b.closePath();b.fill()};group=new THREE.Object3D;scene.add(group);for(var c=0;100>c;c++)particle=new THREE.Particle(new THREE.ParticleCanvasMaterial({color:8421384*Math.random()+8421504,program:d})),particle.position.x=
2E3*Math.random()-1E3,particle.position.y=2E3*Math.random()-1E3,particle.position.z=2E3*Math.random()-1E3,particle.scale.x=particle.scale.y=10*Math.random()+5,group.add(particle);renderer=new THREE.CanvasRenderer;renderer.setSize(window.innerWidth,window.innerHeight);container.appendChild(renderer.domElement);document.addEventListener("mousemove",onDocumentMouseMove,!1);document.addEventListener("touchstart",onDocumentTouchStart,!1);document.addEventListener("touchmove",onDocumentTouchMove,!1);window.addEventListener("resize",
onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2;windowHalfY=window.innerHeight/2;camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseMove(a){mouseX=a.clientX-windowHalfX;mouseY=a.clientY-windowHalfY}function onDocumentTouchStart(a){1===a.touches.length&&(a.preventDefault(),mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)}
function onDocumentTouchMove(a){1===a.touches.length&&(a.preventDefault(),mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)}function animate(){requestAnimationFrame(animate);render()}function render(){camera.position.x+=0.05*(mouseX-camera.position.x);camera.position.y+=0.05*(-mouseY-camera.position.y);camera.lookAt(scene.position);group.rotation.x+=0.01;group.rotation.y+=0.02;renderer.render(scene,camera)};
</script>

<div class="wrapper">
  <h1>An error occurred</h1>
	<h2><?php echo $this->message ?></h2>
 	<div class="desc">You seem to be lost in space<br> <a href="<?php echo $this->baseUrl(); ?>"> Click here to go back </a></div>
</div>

</body>
</html>
<?php endif; ?>
